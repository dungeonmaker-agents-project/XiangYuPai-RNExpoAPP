# Activity ç»„å±€æ´»åŠ¨æ¨¡å—å¿«é€Ÿç†è§£

## ğŸ“Œ æ ¸å¿ƒå®šä½
å‘å¨±æ‹ React Native App çš„**ç»„å±€æ´»åŠ¨æ¨¡å—**ï¼Œæä¾›çº¿ä¸‹æ´»åŠ¨å‘å¸ƒã€æµè§ˆã€æŠ¥åç­‰åŠŸèƒ½ã€‚

**æŠ€æœ¯æ ˆ**: React Native + Expo Router + TypeScript

## ğŸ¯ ä¸»è¦åŠŸèƒ½
- **æ´»åŠ¨åˆ—è¡¨**ï¼ˆæ”¯æŒç­›é€‰ã€ä¸‹æ‹‰åˆ·æ–°ã€æ— é™æ»šåŠ¨ï¼‰
- **æ´»åŠ¨è¯¦æƒ…**ï¼ˆå®Œæ•´ä¿¡æ¯ã€æŠ¥åæ“ä½œï¼‰
- **å‘å¸ƒæ´»åŠ¨**ï¼ˆåˆ›å»ºæ–°ç»„å±€ï¼‰
- **æ´»åŠ¨ç­›é€‰**ï¼ˆç±»å‹/äººæ•°/ä»·æ ¼ç­›é€‰ï¼‰

## ğŸ“ ç›®å½•ç»“æ„
```
Activity/
â”œâ”€â”€ index.ts                  # æ¨¡å—ç»Ÿä¸€å¯¼å‡º
â”œâ”€â”€ types.ts                  # ç±»å‹å®šä¹‰
â”œâ”€â”€ å¿«é€Ÿç†è§£.md                # æœ¬æ–‡æ¡£
â”‚
â”œâ”€â”€ ActivityListPage/         # ğŸ“‹ æ´»åŠ¨åˆ—è¡¨é¡µ
â”‚   â””â”€â”€ index.tsx             # åˆ—è¡¨é¡µé¢ï¼ˆç­›é€‰+åˆ†é¡µï¼‰
â”‚
â”œâ”€â”€ ActivityDetailPage/       # ğŸ“„ æ´»åŠ¨è¯¦æƒ…é¡µ
â”‚   â””â”€â”€ index.tsx             # è¯¦æƒ…é¡µé¢ï¼ˆæŠ¥åæ“ä½œï¼‰
â”‚
â”œâ”€â”€ PublishActivityPage/      # âœï¸ å‘å¸ƒæ´»åŠ¨é¡µ
â”‚   â””â”€â”€ index.tsx             # å‘å¸ƒè¡¨å•
â”‚
â””â”€â”€ FilterPage/               # ğŸ” ç­›é€‰é¡µ
    â””â”€â”€ index.tsx             # ç­›é€‰æ¡ä»¶é€‰æ‹©
```

## ğŸ—ºï¸ é¡µé¢å¯¼èˆªæµç¨‹

### é¡µé¢æ¸…å•

| é¡µé¢ | è·¯ç”± | ç»„ä»¶ | çŠ¶æ€ |
|------|------|------|------|
| **æ´»åŠ¨åˆ—è¡¨é¡µ** | `/activity` | `ActivityListPage` | âœ… å·²å®ç° |
| **æ´»åŠ¨è¯¦æƒ…é¡µ** | `/activity/detail?id={id}` | `ActivityDetailPage` | âœ… å·²å®ç° |
| **å‘å¸ƒæ´»åŠ¨é¡µ** | `/activity/publish` | `PublishActivityPage` | âœ… å·²å®ç° |
| **ç­›é€‰é¡µ** | `/activity/filter` | `FilterPage` | âœ… å·²å®ç° |

### é¡µé¢è·³è½¬å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Activity æ¨¡å—å¯¼èˆªæµç¨‹                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚    /activity      â”‚
                        â”‚ ActivityListPage  â”‚
                        â”‚   æ´»åŠ¨åˆ—è¡¨é¡µ       â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                         â”‚                         â”‚
        â†“                         â†“                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç‚¹å‡»æ´»åŠ¨å¡ç‰‡   â”‚        â”‚ ç‚¹å‡»å‘å¸ƒæŒ‰é’®   â”‚        â”‚ ç‚¹å‡»ç­›é€‰æŒ‰é’®   â”‚
â”‚               â”‚        â”‚               â”‚        â”‚               â”‚
â”‚    è¯¦æƒ…é¡µ     â”‚        â”‚    å‘å¸ƒé¡µ     â”‚        â”‚    ç­›é€‰é¡µ      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                        â”‚                        â”‚
        â†“                        â†“                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚/activity/     â”‚        â”‚/activity/     â”‚        â”‚/activity/     â”‚
â”‚detail?id={id} â”‚        â”‚publish        â”‚        â”‚filter         â”‚
â”‚               â”‚        â”‚               â”‚        â”‚               â”‚
â”‚ActivityDetail â”‚        â”‚PublishActivityâ”‚        â”‚ FilterPage    â”‚
â”‚    Page       â”‚        â”‚    Page       â”‚        â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                        â”‚                        â”‚
        â”‚                        â”‚                        â”‚
        â†“                        â†“                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¿”å›æŒ‰é’®     â”‚        â”‚  å‘å¸ƒæˆåŠŸå   â”‚        â”‚  ç¡®è®¤ç­›é€‰     â”‚
â”‚  router.back()â”‚        â”‚  replaceåˆ°    â”‚        â”‚  router.back()â”‚
â”‚               â”‚        â”‚  è¯¦æƒ…é¡µ       â”‚        â”‚               â”‚
â”‚  â†’ æ´»åŠ¨åˆ—è¡¨   â”‚        â”‚               â”‚        â”‚  â†’ æ´»åŠ¨åˆ—è¡¨   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¯¦ç»†å¯¼èˆªè¯´æ˜

#### 1. æ´»åŠ¨åˆ—è¡¨é¡µ (ActivityListPage) å‡ºå‘çš„å¯¼èˆª

| è§¦å‘åŒºåŸŸ | è§¦å‘æ“ä½œ | ç›®æ ‡é¡µé¢ | å¯¼èˆªä»£ç  |
|---------|---------|---------|---------|
| æ´»åŠ¨å¡ç‰‡ | ç‚¹å‡»å¡ç‰‡ | æ´»åŠ¨è¯¦æƒ…é¡µ | `router.push('/activity/detail?id=${activityId}')` |
| Header | ç‚¹å‡»"å‘å¸ƒç»„å±€"æŒ‰é’® | å‘å¸ƒæ´»åŠ¨é¡µ | `router.push('/activity/publish')` |
| ç­›é€‰æ  | ç‚¹å‡»"æˆå‘˜"ç­›é€‰ | ç­›é€‰é¡µ | `router.push('/activity/filter')` |

#### 2. æ´»åŠ¨è¯¦æƒ…é¡µ (ActivityDetailPage) å‡ºå‘çš„å¯¼èˆª

| è§¦å‘æ“ä½œ | ç›®æ ‡é¡µé¢ | å¯¼èˆªä»£ç  |
|---------|---------|---------|
| ç‚¹å‡»è¿”å› | æ´»åŠ¨åˆ—è¡¨é¡µ | `router.back()` |
| ç‚¹å‡»å‘èµ·äººå¤´åƒ | ç”¨æˆ·è¯¦æƒ…é¡µ | æš‚æœªå®ç° |
| ç‚¹å‡»å·²æŠ¥åç”¨æˆ· | ç”¨æˆ·è¯¦æƒ…é¡µ | æš‚æœªå®ç° |

#### 3. å‘å¸ƒæ´»åŠ¨é¡µ (PublishActivityPage) å‡ºå‘çš„å¯¼èˆª

| è§¦å‘æ“ä½œ | ç›®æ ‡é¡µé¢ | å¯¼èˆªä»£ç  |
|---------|---------|---------|
| ç‚¹å‡»è¿”å› | æ´»åŠ¨åˆ—è¡¨é¡µ | `router.back()` |
| å‘å¸ƒæˆåŠŸ | æ´»åŠ¨è¯¦æƒ…é¡µ | `router.replace('/activity/detail?id=${response.data.activityId}')` |

#### 4. ç­›é€‰é¡µ (FilterPage) å‡ºå‘çš„å¯¼èˆª

| è§¦å‘æ“ä½œ | ç›®æ ‡é¡µé¢ | å¯¼èˆªä»£ç  |
|---------|---------|---------|
| ç‚¹å‡»è¿”å›/å…³é—­ | æ´»åŠ¨åˆ—è¡¨é¡µ | `router.back()` |
| ç¡®è®¤ç­›é€‰ | æ´»åŠ¨åˆ—è¡¨é¡µ | `router.back()` |

### è·¨æ¨¡å—å¯¼èˆªï¼ˆä» Activity å‡ºå‘ï¼‰

| ç›®æ ‡æ¨¡å— | ç›®æ ‡é¡µé¢ | è§¦å‘åœºæ™¯ | è·¯ç”± | çŠ¶æ€ |
|---------|---------|---------|------|------|
| **Profile** | ç”¨æˆ·è¯¦æƒ… | ç‚¹å‡»å‘èµ·äººå¤´åƒ | `/profile/[userId]` | ğŸš§ æš‚æœªå®ç° |
| **Profile** | ç”¨æˆ·è¯¦æƒ… | ç‚¹å‡»å·²æŠ¥åç”¨æˆ· | `/profile/[userId]` | ğŸš§ æš‚æœªå®ç° |

### å¤–éƒ¨è¿›å…¥ Activity æ¨¡å—

| æ¥æºæ¨¡å— | å…¥å£ | è·¯ç”± |
|---------|------|------|
| Homepage/MainPage | ç‚¹å‡»"ç»„å±€ä¸­å¿ƒ"å…¥å£ | `/activity` |
| Homepage/EventCenterPage | ç‚¹å‡»æ´»åŠ¨å¡ç‰‡ | `/activity/detail?id={id}` |

## ğŸ”‘ æ ¸å¿ƒæ¥å£

### é¡µé¢ç»„ä»¶
| ç»„ä»¶ | è¯´æ˜ | è·¯ç”± |
|------|------|------|
| `ActivityListPage` | æ´»åŠ¨åˆ—è¡¨ | `/activity` |
| `ActivityDetailPage` | æ´»åŠ¨è¯¦æƒ… | `/activity/detail?id={id}` |
| `PublishActivityPage` | å‘å¸ƒæ´»åŠ¨ | `/activity/publish` |
| `FilterPage` | æ´»åŠ¨ç­›é€‰ | `/activity/filter` |

### API æœåŠ¡
æ¨¡å—ä½¿ç”¨ `services/api/activityApi` å’Œ `services/api/bffApi`ï¼š

#### activityApiï¼ˆåŸºç¡€æ´»åŠ¨æœåŠ¡ï¼‰
| API | è¯´æ˜ |
|-----|------|
| `getActivityList()` | è·å–æ´»åŠ¨åˆ—è¡¨ |
| `getActivityDetail()` | è·å–æ´»åŠ¨è¯¦æƒ… |
| `publishActivity()` | å‘å¸ƒæ´»åŠ¨ |
| `registerActivity()` | æŠ¥åæ´»åŠ¨ |
| `getPublishConfig()` | è·å–å‘å¸ƒé…ç½® |

#### bffApiï¼ˆBFFèšåˆæœåŠ¡ - æ¨èä½¿ç”¨ï¼‰
| API | è¯´æ˜ | Gatewayè·¯å¾„ |
|-----|------|-------------|
| `getActivityList()` | è·å–æ´»åŠ¨åˆ—è¡¨ï¼ˆå¸¦ç­›é€‰é…ç½®ï¼‰ | GET `/xypai-app-bff/api/activity/list` |
| `getActivityDetail()` | è·å–æ´»åŠ¨è¯¦æƒ…ï¼ˆæ‰å¹³åŒ–ç»“æ„ï¼‰ | GET `/xypai-app-bff/api/activity/detail/{id}` |
| `registerActivity()` | æŠ¥åå‚åŠ æ´»åŠ¨ | POST `/xypai-app-bff/api/activity/register` |
| `cancelActivityRegistration()` | å–æ¶ˆæ´»åŠ¨æŠ¥å | POST `/xypai-app-bff/api/activity/register/cancel` |
| `getActivityPublishConfig()` | è·å–å‘å¸ƒé…ç½®ï¼ˆæ´»åŠ¨ç±»å‹ã€è´¹ç”¨è§„åˆ™ç­‰ï¼‰ | GET `/xypai-app-bff/api/activity/publish/config` |
| `publishActivity()` | å‘å¸ƒæ´»åŠ¨ | POST `/xypai-app-bff/api/activity/publish` |
| `payActivityPublishFee()` | æ”¯ä»˜å‘å¸ƒå¹³å°è´¹ | POST `/xypai-app-bff/api/activity/publish/pay` |

**åç«¯æµ‹è¯•æ–‡ä»¶å‚è€ƒ:** `Page08_ActivityListTest.java`, `Page09_ActivityDetailTest.java`, `Page10_PublishActivityTest.java`

### æ´»åŠ¨ç±»å‹
```typescript
type ActivityType =
  | 'explore'    // æ¢åº—
  | 'mystery'    // å¯†å®¤
  | 'movie'      // ç§å½±
  | 'billiards'  // å°çƒ
  | 'ktv'        // Kæ­Œ
  | 'massage'    // æŒ‰æ‘©
  | 'drink';     // å–é…’
```

## ğŸ›ï¸ æ•°æ®æµå‘
```
ç”¨æˆ·æ“ä½œ
    â†“
é¡µé¢ç»„ä»¶ (ActivityListPage/DetailPage)
    â†“
activityApi (services/api/)
    â†“
åç«¯æœåŠ¡ (xypai-activity)
    â†“
æ•°æ®è¿”å› â†’ UI æ›´æ–°
```

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### å¯¼å…¥æ–¹å¼
```typescript
import {
  ActivityListPage,
  ActivityDetailPage,
  PublishActivityPage,
  FilterPage
} from '@/src/features/Activity';
```

### ä½¿ç”¨ç¤ºä¾‹
```typescript
// åœ¨è·¯ç”±æ–‡ä»¶ä¸­
// app/activity/index.tsx
import { ActivityListPage } from '@/src/features/Activity';
export default ActivityListPage;

// app/activity/[id].tsx
import { ActivityDetailPage } from '@/src/features/Activity';
export default ActivityDetailPage;
```

## ğŸ“Œ æ³¨æ„äº‹é¡¹

### æ¶æ„è§„èŒƒ
- ç®€å•æ¨¡å—ï¼Œæ¯ä¸ªé¡µé¢ç‹¬ç«‹ç›®å½•
- æ— å¤æ‚åµŒå¥—ï¼Œæ‰å¹³åŒ–ç»“æ„
- API æœåŠ¡åœ¨å…¨å±€ `services/api/` ç›®å½•

### ç­›é€‰é€»è¾‘
- `FilterPage` ç‹¬ç«‹é¡µé¢ï¼Œé€šè¿‡è·¯ç”±å‚æ•°ä¼ é€’ç­›é€‰æ¡ä»¶
- ç­›é€‰æ¡ä»¶åŒ…æ‹¬ï¼šæ’åºã€æ€§åˆ«ã€äººæ•°ã€æ´»åŠ¨ç±»å‹

### æŠ¥åæµç¨‹
1. ç”¨æˆ·åœ¨è¯¦æƒ…é¡µç‚¹å‡»æŠ¥å
2. è°ƒç”¨ `registerActivity()` API
3. æˆåŠŸååˆ·æ–°è¯¦æƒ…æ•°æ®

### å‘å¸ƒæµç¨‹
1. åŠ è½½å‘å¸ƒé…ç½® `getPublishConfig()`
2. å¡«å†™è¡¨å•æ•°æ®
3. æäº¤ `publishActivity()`
4. æˆåŠŸåè·³è½¬åˆ°åˆ—è¡¨é¡µ
