# Discovery å‘ç°æ¨¡å—å¿«é€Ÿç†è§£

## ğŸ“Œ æ ¸å¿ƒå®šä½
å‘å¨±æ‹ React Native App çš„**ç¤¾äº¤å†…å®¹å‘ç°æ¨¡å—**ï¼Œæä¾›åŠ¨æ€æµæµè§ˆã€äº’åŠ¨å’Œå†…å®¹è¯¦æƒ…åŠŸèƒ½ã€‚

**æŠ€æœ¯æ ˆ**: React Native + Expo Router + TypeScript + Zustand

## ğŸ¯ ä¸»è¦åŠŸèƒ½
- **ä¸‰TabåŠ¨æ€æµ**ï¼ˆå…³æ³¨/çƒ­é—¨/åŒåŸï¼‰
- **ç€‘å¸ƒæµåˆ—è¡¨**ï¼ˆåŒåˆ—å¡ç‰‡å¸ƒå±€ï¼‰
- **åŠ¨æ€è¯¦æƒ…**ï¼ˆå›¾æ–‡+è¯„è®º+äº’åŠ¨ï¼‰
- **äº’åŠ¨åŠŸèƒ½**ï¼ˆç‚¹èµ/æ”¶è—/è¯„è®º/åˆ†äº«ï¼‰
- **è¯é¢˜ç³»ç»Ÿ**ï¼ˆè¯é¢˜å…³è”+è¯é¢˜é¡µï¼‰
- **ä¸¾æŠ¥åŠŸèƒ½**ï¼ˆå†…å®¹ä¸¾æŠ¥+ç†ç”±é€‰æ‹©ï¼‰
- **åœ°ç†ä½ç½®**ï¼ˆåŒåŸå†…å®¹+è·ç¦»æ˜¾ç¤ºï¼‰

## ğŸ—ï¸ æŠ€æœ¯æ ˆ
- React Native 0.72+
- Expo Routerï¼ˆè·¯ç”±å¯¼èˆªï¼‰
- TypeScriptï¼ˆä¸¥æ ¼æ¨¡å¼ï¼‰
- Zustandï¼ˆçŠ¶æ€ç®¡ç† - `discoveryStore`ï¼‰
- å…«æ®µå¼å•æ–‡ä»¶æ¶æ„ï¼ˆUNIVERSAL_COMPONENT_ARCHITECTURE_CORE v2.5ï¼‰

## ğŸ“ æ ¸å¿ƒç›®å½•ç»“æ„
```
Discovery/
â”œâ”€â”€ index.tsx                     # æ¨¡å—å…¥å£ï¼ˆé¡µé¢ç»„åè°ƒï¼‰
â”œâ”€â”€ types.ts                      # ç±»å‹å®šä¹‰ï¼ˆFeed/Comment/Topicç­‰ï¼‰
â”œâ”€â”€ constants.ts                  # å¸¸é‡é…ç½®ï¼ˆé¢œè‰²/å°ºå¯¸/APIç­‰ï¼‰
â”œâ”€â”€ MainPage/                     # ğŸ“± å‘ç°ä¸»é¡µé¢
â”‚   â”œâ”€â”€ index.tsx                 # ä¸»é¡µé¢ï¼ˆä¸‰Tabåˆ‡æ¢+åˆ—è¡¨ï¼‰
â”‚   â”œâ”€â”€ types.ts                  # é¡µé¢ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ constants.ts              # é¡µé¢å¸¸é‡
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ NavigationArea/       # Tabå¯¼èˆªåŒºåŸŸ
â”‚       â”œâ”€â”€ ContentArea/          # å†…å®¹åˆ—è¡¨åŒºåŸŸ
â”‚       â”‚   â””â”€â”€ WaterfallList.tsx # ç€‘å¸ƒæµåˆ—è¡¨
â”‚       â””â”€â”€ FeedCard/             # åŠ¨æ€å¡ç‰‡ç»„ä»¶
â”œâ”€â”€ DetailPage/                   # ğŸ“‹ åŠ¨æ€è¯¦æƒ…é¡µé¢
â”‚   â”œâ”€â”€ index.tsx                 # è¯¦æƒ…é¡µé¢ï¼ˆå›¾æ–‡+è¯„è®ºï¼‰
â”‚   â”œâ”€â”€ ShareModal.tsx            # åˆ†äº«å¼¹çª—
â”‚   â””â”€â”€ ReportModal.tsx           # ä¸¾æŠ¥å¼¹çª—
â”œâ”€â”€ TopicDetailPage/              # ğŸ·ï¸ è¯é¢˜è¯¦æƒ…é¡µé¢
â””â”€â”€ utils/
    â””â”€â”€ dataTransform.ts          # æ•°æ®è½¬æ¢å·¥å…·ï¼ˆAPIâ†’UIï¼‰
```

## ğŸ—ºï¸ é¡µé¢å¯¼èˆªæµç¨‹

### é¡µé¢æ¸…å•

| é¡µé¢ | è·¯ç”± | ç»„ä»¶ | çŠ¶æ€ |
|------|------|------|------|
| **å‘ç°ä¸»é¡µ** | `/(tabs)/discover` | `MainPage` | âœ… å·²å®ç° |
| **åŠ¨æ€è¯¦æƒ…** | `/feed/[id]` | `DetailPage` | âœ… å·²å®ç° |
| **è¯é¢˜è¯¦æƒ…** | `/topic/[topicId]` | `TopicDetailPage` | âœ… å·²å®ç° |
| **å‘å¸ƒåŠ¨æ€** | `/publish-post` | `PublishPostPage` | âœ… å·²å®ç° |

### é¡µé¢è·³è½¬å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Discovery æ¨¡å—å¯¼èˆªæµç¨‹                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ /(tabs)/discover â”‚
                        â”‚    MainPage      â”‚
                        â”‚   å‘ç°ä¸»é¡µé¢      â”‚
                        â”‚   (ä¸‰Tabåˆ‡æ¢)     â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                       â”‚                       â”‚
         â†“                       â†“                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å…³æ³¨ Tab       â”‚    â”‚   çƒ­é—¨ Tab       â”‚    â”‚   åŒåŸ Tab       â”‚
â”‚   followFeeds   â”‚    â”‚   hotFeeds      â”‚    â”‚   localFeeds    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                      â”‚                      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                     ç‚¹å‡»åŠ¨æ€å¡ç‰‡ (FeedCard)
                                â”‚
                                â†“
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚  /feed/[id]     â”‚
                      â”‚   DetailPage    â”‚
                      â”‚   åŠ¨æ€è¯¦æƒ…é¡µ     â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                     â”‚                     â”‚
         â†“                     â†“                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç‚¹å‡»ç”¨æˆ·å¤´åƒ    â”‚  â”‚  ç‚¹å‡»è¯é¢˜æ ‡ç­¾    â”‚  â”‚  åˆ†äº«/ä¸¾æŠ¥       â”‚
â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚
â”‚ â†’ ç”¨æˆ·è¯¦æƒ…é¡µ    â”‚  â”‚ â†’ è¯é¢˜è¯¦æƒ…é¡µ    â”‚  â”‚  ShareModal     â”‚
â”‚/profile/[userId]â”‚  â”‚/topic/[topicId] â”‚  â”‚  ReportModal    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚
         â†“                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Profile æ¨¡å—   â”‚  â”‚/topic/[topicId] â”‚
â”‚  ç”¨æˆ·è¯¦æƒ…é¡µ      â”‚  â”‚TopicDetailPage  â”‚
â”‚                 â”‚  â”‚  è¯é¢˜è¯¦æƒ…é¡µ      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    ç‚¹å‡»è¯é¢˜å†…åŠ¨æ€å¡ç‰‡
                              â”‚
                              â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  /feed/[id]     â”‚
                    â”‚  åŠ¨æ€è¯¦æƒ…é¡µ      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚              å‘å¸ƒåŠ¨æ€å…¥å£                     â”‚
         â”‚                                             â”‚
         â”‚  MainPage FABæŒ‰é’® â†’ /publish-post           â”‚
         â”‚                    å‘å¸ƒåŠ¨æ€é¡µ                â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¯¦ç»†å¯¼èˆªè¯´æ˜

#### 1. å‘ç°ä¸»é¡µ (MainPage) å‡ºå‘çš„å¯¼èˆª

| è§¦å‘æ“ä½œ | ç›®æ ‡é¡µé¢ | å¯¼èˆªä»£ç  |
|---------|---------|---------|
| ç‚¹å‡»åŠ¨æ€å¡ç‰‡ | åŠ¨æ€è¯¦æƒ… | `router.push('/feed/${feedId}')` |
| ç‚¹å‡»FABå‘å¸ƒæŒ‰é’® | å‘å¸ƒåŠ¨æ€ | `router.push('/publish-post')` |
| ç‚¹å‡»ç”¨æˆ·å¤´åƒ | ç”¨æˆ·è¯¦æƒ… | æš‚æœªå®ç°ï¼ˆæ³¨é‡ŠçŠ¶æ€ï¼‰ |

#### 2. åŠ¨æ€è¯¦æƒ…é¡µ (DetailPage) å‡ºå‘çš„å¯¼èˆª

| è§¦å‘æ“ä½œ | ç›®æ ‡é¡µé¢ | å¯¼èˆªä»£ç  |
|---------|---------|---------|
| ç‚¹å‡»ä½œè€…å¤´åƒ | ç”¨æˆ·è¯¦æƒ… | `router.push({ pathname: '/profile/[userId]', params: { userId } })` |
| ç‚¹å‡»è¯é¢˜æ ‡ç­¾ | è¯é¢˜è¯¦æƒ… | `router.push({ pathname: '/topic/[topicId]', params: { topicId } })` |
| ç‚¹å‡»è¯„è®ºç”¨æˆ· | ç”¨æˆ·è¯¦æƒ… | `router.push({ pathname: '/profile/[userId]', params: { userId } })` |
| ç‚¹å‡»åˆ†äº« | åˆ†äº«å¼¹çª— | `ShareModal` ç»„ä»¶ |
| ç‚¹å‡»ä¸¾æŠ¥ | ä¸¾æŠ¥å¼¹çª— | `ReportModal` ç»„ä»¶ |

#### 3. è¯é¢˜è¯¦æƒ…é¡µ (TopicDetailPage) å‡ºå‘çš„å¯¼èˆª

| è§¦å‘æ“ä½œ | ç›®æ ‡é¡µé¢ | å¯¼èˆªä»£ç  |
|---------|---------|---------|
| ç‚¹å‡»åŠ¨æ€å¡ç‰‡ | åŠ¨æ€è¯¦æƒ… | `router.push({ pathname: '/feed/[id]', params: { id: feedId } })` |
| ç‚¹å‡»ç”¨æˆ·å¤´åƒ | ç”¨æˆ·è¯¦æƒ… | `router.push({ pathname: '/profile/[userId]', params: { userId } })` |

### è·¨æ¨¡å—å¯¼èˆªï¼ˆä» Discovery å‡ºå‘ï¼‰

| ç›®æ ‡æ¨¡å— | ç›®æ ‡é¡µé¢ | è§¦å‘åœºæ™¯ | è·¯ç”± |
|---------|---------|---------|------|
| **Profile** | ç”¨æˆ·è¯¦æƒ… | ç‚¹å‡»åŠ¨æ€ä½œè€…å¤´åƒ | `/profile/[userId]` |
| **Profile** | ç”¨æˆ·è¯¦æƒ… | ç‚¹å‡»è¯„è®ºè€…å¤´åƒ | `/profile/[userId]` |

### å¤–éƒ¨è¿›å…¥ Discovery æ¨¡å—

| æ¥æº | å…¥å£ | è·¯ç”± |
|------|------|------|
| åº•éƒ¨Tabæ  | ç‚¹å‡»"å‘ç°"Tab | `/(tabs)/discover` |
| Homepage | éƒ¨åˆ†å…¥å£è·³è½¬ | `/(tabs)/discover` |

## ğŸ”‘ æ ¸å¿ƒæ¥å£

### é¡µé¢ç»„ä»¶
| ç»„ä»¶ | è¯´æ˜ | è·¯ç”± |
|------|------|------|
| `MainPage` | å‘ç°ä¸»é¡µé¢ï¼ˆä¸‰Tabï¼‰ | `/(tabs)/discover` |
| `DetailPage` | åŠ¨æ€è¯¦æƒ…é¡µé¢ | `/feed/[id]` |
| `TopicDetailPage` | è¯é¢˜è¯¦æƒ…é¡µé¢ | `/topic/[topicId]` |

### çŠ¶æ€ç®¡ç†ï¼ˆZustand Storeï¼‰
| Store | è¯´æ˜ | æ ¸å¿ƒçŠ¶æ€ |
|-------|------|---------|
| `discoveryStore` | å‘ç°é¡µé¢çŠ¶æ€ | activeTab, feedData, loading, refreshing |

### æ ¸å¿ƒ Actions
| Action | è¯´æ˜ |
|--------|------|
| `setActiveTab(tab)` | åˆ‡æ¢Tabï¼ˆfollow/hot/localï¼‰ |
| `loadFeedList(tab, refresh)` | åŠ è½½åŠ¨æ€åˆ—è¡¨ |
| `loadMoreFeeds(tab)` | åŠ è½½æ›´å¤šï¼ˆåˆ†é¡µï¼‰ |
| `toggleLike(feedId, tab)` | åˆ‡æ¢ç‚¹èµï¼ˆä¹è§‚æ›´æ–°ï¼‰ |
| `toggleCollect(feedId, tab)` | åˆ‡æ¢æ”¶è—ï¼ˆä¹è§‚æ›´æ–°ï¼‰ |
| `shareFeed(feedId)` | åˆ†äº«åŠ¨æ€ |

### æ•°æ®è½¬æ¢å·¥å…·
| å‡½æ•° | è¯´æ˜ |
|------|------|
| `transformFeedListItemToFeed()` | åç«¯æ•°æ® â†’ å‰ç«¯Feedç±»å‹ |
| `transformCommentItemToComment()` | åç«¯æ•°æ® â†’ å‰ç«¯Commentç±»å‹ |
| `formatRelativeTime()` | æ—¶é—´æˆ³ â†’ ç›¸å¯¹æ—¶é—´ |
| `formatNumber()` | æ•°å­—æ ¼å¼åŒ–ï¼ˆ1000â†’1kï¼‰ |

### æœ‰æŠ€èƒ½ç”¨æˆ· API
| æ–¹æ³• | è¯´æ˜ |
|------|------|
| `getSkilledUsers(params)` | è·å–æœ‰æŠ€èƒ½çš„ç”¨æˆ·åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µã€ç­›é€‰ã€æ’åºï¼‰ |

#### getSkilledUsers å‚æ•°è¯´æ˜
| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| pageNum | number | 1 | é¡µç ï¼ˆä»1å¼€å§‹ï¼‰ |
| pageSize | number | 20 | æ¯é¡µæ•°é‡ |
| gender | 'all' \| 'male' \| 'female' | 'all' | æ€§åˆ«ç­›é€‰ |
| sortBy | string | 'smart_recommend' | æ’åºæ–¹å¼ |
| cityCode | string | - | åŸå¸‚ä»£ç ï¼ˆå¯é€‰ï¼‰ |
| districtCode | string | - | åŒºå¿ä»£ç ï¼ˆå¯é€‰ï¼‰ |

#### æ’åºæ–¹å¼è¯´æ˜
- `smart_recommend`: æ™ºèƒ½æ¨èï¼ˆåœ¨çº¿ä¼˜å…ˆ+è·ç¦»è¿‘+ä»·æ ¼ä½ï¼‰
- `price_asc`: ä»·æ ¼ä»ä½åˆ°é«˜
- `price_desc`: ä»·æ ¼ä»é«˜åˆ°ä½
- `distance_asc`: è·ç¦»æœ€è¿‘

## ğŸ›ï¸ æ¶æ„è®¾è®¡

### æ¨¡å—æ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Discovery æ¨¡å—å…¥å£            â”‚
â”‚            (index.tsx)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â†“            â†“            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚MainPage â”‚ â”‚DetailPageâ”‚ â”‚TopicDetail  â”‚
â”‚(ä¸‰Tab)  â”‚ â”‚(è¯¦æƒ…)    â”‚ â”‚Page(è¯é¢˜)   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        MainPage ç»„ä»¶å±‚        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  NavigationArea (Tabåˆ‡æ¢)     â”‚
â”‚  ContentArea (ç€‘å¸ƒæµåˆ—è¡¨)      â”‚
â”‚    â””â”€ WaterfallList          â”‚
â”‚       â””â”€ FeedCard (åŠ¨æ€å¡ç‰‡)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### çŠ¶æ€ç®¡ç†æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      discoveryStore (Zustand)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ui: {                               â”‚
â”‚    activeTab: 'follow'|'hot'|'local' â”‚
â”‚    loading: boolean                  â”‚
â”‚    refreshing: boolean               â”‚
â”‚    error: Error | null               â”‚
â”‚  }                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  feedData: {                         â”‚
â”‚    followFeeds: Feed[]               â”‚
â”‚    hotFeeds: Feed[]                  â”‚
â”‚    localFeeds: Feed[]                â”‚
â”‚    hasMore: { follow, hot, local }   â”‚
â”‚  }                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ è°ƒç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       discoveryApi (APIæœåŠ¡)         â”‚
â”‚   ä½ç½®: services/api/discoveryApi.ts â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ è½¬æ¢
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      dataTransform (æ•°æ®è½¬æ¢)        â”‚
â”‚   ä½ç½®: Discovery/utils/             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµå‘
```
åç«¯API (xypai-content)
         â†“ HTTP Response
discoveryApi.ts
         â†“ FeedListItem[]
dataTransform.ts
         â†“ Feed[] (å‰ç«¯ç±»å‹)
discoveryStore.ts
         â†“ State Update
MainPage/DetailPage
         â†“ Render
ç”¨æˆ·ç•Œé¢
```

## ğŸ”¥ æŠ€æœ¯äº®ç‚¹

1. **å…«æ®µå¼å•æ–‡ä»¶æ¶æ„**ï¼šé‡‡ç”¨ UNIVERSAL_COMPONENT_ARCHITECTURE_CORE v2.5 æ ‡å‡†ï¼Œæ¯ä¸ªæ–‡ä»¶æŒ‰9ä¸ª region ç»„ç»‡ä»£ç 
2. **ç€‘å¸ƒæµåŒåˆ—å¸ƒå±€**ï¼š`WaterfallList` ç»„ä»¶å®ç°é«˜æ€§èƒ½åŒåˆ—ç€‘å¸ƒæµï¼Œæ”¯æŒéšæœºå¡ç‰‡é«˜åº¦
3. **ä¹è§‚æ›´æ–°**ï¼šç‚¹èµ/æ”¶è—æ“ä½œç«‹å³æ›´æ–°UIï¼Œåå°å¼‚æ­¥åŒæ­¥ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
4. **æ•°æ®è½¬æ¢å±‚**ï¼š`dataTransform.ts` ç»Ÿä¸€å¤„ç†åç«¯æ•°æ®æ ¼å¼è½¬æ¢ï¼Œè§£è€¦å‰åç«¯
5. **ä¸‰Tabç‹¬ç«‹æ•°æ®**ï¼šæ¯ä¸ªTabç‹¬ç«‹ç»´æŠ¤æ•°æ®åˆ—è¡¨å’Œåˆ†é¡µçŠ¶æ€ï¼Œåˆ‡æ¢æ— éœ€é‡æ–°åŠ è½½
6. **åŠ¨ç”»åé¦ˆ**ï¼šç‚¹èµ/æ”¶è—ä½¿ç”¨ `Animated.spring` åŠ¨ç”»æ•ˆæœ
7. **è·¯ç”±é›†æˆ**ï¼šæ·±åº¦é›†æˆ Expo Routerï¼Œæ”¯æŒåŠ¨æ€è·¯ç”±å‚æ•°

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### å‰ç½®ä¾èµ–
```bash
# ç¡®ä¿å·²å®‰è£… Node.js 18+ å’Œ Expo CLI
npm install -g expo-cli

# å®‰è£…é¡¹ç›®ä¾èµ–
cd XiangYuPai-RNExpoAPP
npm install
```

### è®¿é—®å‘ç°é¡µé¢
```typescript
// åœ¨ React Navigation / Expo Router ä¸­
import Discovery from '@/src/features/Discovery';

// ä½œä¸ºTabé¡µé¢ä½¿ç”¨
<Discovery initialTab="hot" userId={currentUserId} />

// æˆ–ç›´æ¥å¯¼å…¥å­é¡µé¢
import { MainPage, DetailPage } from '@/src/features/Discovery';
```

### è·¯ç”±é…ç½®
```
app/
â”œâ”€â”€ (tabs)/
â”‚   â””â”€â”€ discover.tsx      # å‘ç°Tabå…¥å£
â”œâ”€â”€ feed/
â”‚   â””â”€â”€ [feedId].tsx      # åŠ¨æ€è¯¦æƒ…é¡µ
â””â”€â”€ topic/
    â””â”€â”€ [topicId].tsx     # è¯é¢˜è¯¦æƒ…é¡µ
```

## ğŸ“Œ æ³¨æ„äº‹é¡¹

### æ•°æ®æºä¸API
- **åç«¯æœåŠ¡**ï¼šå¯¹æ¥ `xypai-content` å†…å®¹æœåŠ¡ï¼ˆç«¯å£ 9403ï¼‰
- **APIä½ç½®**ï¼š`services/api/discoveryApi.ts`
- **Storeä½ç½®**ï¼š`stores/discoveryStore.ts`ï¼ˆé¡¹ç›®æ ¹ç›®å½•ï¼‰
- **æ•°æ®è½¬æ¢**ï¼šå¿…é¡»é€šè¿‡ `dataTransform.ts` è½¬æ¢åç«¯æ•°æ®

### çŠ¶æ€ç®¡ç†
- **å…¨å±€Store**ï¼šä½¿ç”¨ Zustand `discoveryStore` ç®¡ç†æ‰€æœ‰å‘ç°é¡µçŠ¶æ€
- **Tabæ•°æ®éš”ç¦»**ï¼šä¸‰ä¸ªTabå„è‡ªç»´æŠ¤ç‹¬ç«‹çš„æ•°æ®åˆ—è¡¨
- **ä¹è§‚æ›´æ–°**ï¼šç‚¹èµ/æ”¶è—å…ˆæ›´æ–°UIï¼Œå†è°ƒAPI

### ç»„ä»¶è§„èŒƒ
- **å…«æ®µå¼ç»“æ„**ï¼šæ‰€æœ‰ç»„ä»¶æ–‡ä»¶å¿…é¡»éµå¾ª9ä¸ª region çš„ä»£ç ç»„ç»‡
- **åŒºåŸŸç»„ä»¶**ï¼šæ¯ä¸ªåŠŸèƒ½åŒºåŸŸç‹¬ç«‹ç›®å½•ï¼ˆå¦‚ `NavigationArea/`ï¼‰
- **ç±»å‹å®šä¹‰**ï¼šç»Ÿä¸€åœ¨æ¨¡å—çº§ `types.ts` å®šä¹‰

### APIé›†æˆ
- **å½“å‰çŠ¶æ€**ï¼šéƒ¨åˆ†é¡µé¢ä½¿ç”¨Mockæ•°æ®ï¼ŒDetailPageå·²é›†æˆçœŸå®APIæ¡†æ¶
- **å¾…å®Œæˆ**ï¼šè¯é¢˜æœåŠ¡ã€åª’ä½“æœåŠ¡ã€ç”¨æˆ·å…³ç³»æœåŠ¡é›†æˆ
- **æ•°æ®æ ¼å¼**ï¼šåç«¯è¿”å› `FeedListItem`ï¼Œå‰ç«¯ä½¿ç”¨ `Feed` ç±»å‹

### å¼€å‘è°ƒè¯•
- **Mockæ•°æ®**ï¼š`MainPage/index.tsx` åŒ…å« `generateMockFeeds()` å‡½æ•°
- **æ—¥å¿—è¾“å‡º**ï¼šå…³é”®æ“ä½œæœ‰ `console.log` è°ƒè¯•æ—¥å¿—
- **ç±»å‹å®‰å…¨**ï¼šä¸¥æ ¼TypeScriptæ¨¡å¼ï¼Œæ³¨æ„ç±»å‹è½¬æ¢

### æ€§èƒ½ä¼˜åŒ–
- **FlatList**ï¼šä½¿ç”¨ `keyExtractor` å’Œ `getItemLayout` ä¼˜åŒ–
- **å›¾ç‰‡ç¼“å­˜**ï¼šä¾èµ– React Native å†…ç½®å›¾ç‰‡ç¼“å­˜
- **ç»„ä»¶memo**ï¼šæ ¸å¿ƒç»„ä»¶ä½¿ç”¨ `React.memo` ä¼˜åŒ–é‡æ¸²æŸ“
