# Messages æ¶ˆæ¯æ¨¡å—å¿«é€Ÿç†è§£

## ğŸ“Œ æ ¸å¿ƒå®šä½
å‘å¨±æ‹ React Native App çš„**æ¶ˆæ¯é€šçŸ¥æ¨¡å—**ï¼Œæä¾›ç§ä¿¡èŠå¤©ã€ç³»ç»Ÿé€šçŸ¥ã€äº’åŠ¨æ¶ˆæ¯ç­‰åŠŸèƒ½ã€‚

**æŠ€æœ¯æ ˆ**: React Native + Expo Router + TypeScript + Zustand + WebSocket

## ğŸ¯ ä¸»è¦åŠŸèƒ½
- **æ¶ˆæ¯ä¸»é¡µ**ï¼ˆå››å®«æ ¼åˆ†ç±» + å¯¹è¯åˆ—è¡¨ï¼‰
- **ç§ä¿¡èŠå¤©**ï¼ˆå®æ—¶èŠå¤© + WebSocketï¼‰
- **ç‚¹èµé€šçŸ¥**ï¼ˆè°èµäº†æˆ‘çš„å†…å®¹ï¼‰
- **è¯„è®ºé€šçŸ¥**ï¼ˆè°è¯„è®ºäº†æˆ‘çš„å†…å®¹ï¼‰
- **æ–°ç²‰ä¸é€šçŸ¥**ï¼ˆè°å…³æ³¨äº†æˆ‘ï¼‰
- **ç³»ç»Ÿé€šçŸ¥**ï¼ˆå®˜æ–¹æ¶ˆæ¯ï¼‰

## ğŸ“ æ ¸å¿ƒç›®å½•ç»“æ„
```
Messages/
â”œâ”€â”€ index.ts                      # æ¨¡å—ç»Ÿä¸€å¯¼å‡º
â”œâ”€â”€ types.ts                      # æ¨¡å—çº§ç±»å‹å®šä¹‰
â”œâ”€â”€ constants.ts                  # æ¨¡å—çº§å¸¸é‡
â”œâ”€â”€ å¿«é€Ÿç†è§£.md                    # æœ¬æ–‡æ¡£
â”‚
â”œâ”€â”€ MainPage/                     # ğŸ“± æ¶ˆæ¯ä¸»é¡µé¢
â”‚   â”œâ”€â”€ index.tsx                 # ä¸»é¡µé¢ï¼ˆå…«æ®µå¼ï¼‰
â”‚   â”œâ”€â”€ types.ts                  # é¡µé¢ç±»å‹
â”‚   â”œâ”€â”€ constants.ts              # é¡µé¢å¸¸é‡
â”‚   â”‚
â”‚   â”œâ”€â”€ CategoryArea/             # å››å®«æ ¼åˆ†ç±»åŒºåŸŸ
â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â”œâ”€â”€ ConversationArea/         # å¯¹è¯åˆ—è¡¨åŒºåŸŸ
â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â””â”€â”€ NavigationArea/           # å¯¼èˆªæ åŒºåŸŸ
â”‚       â””â”€â”€ index.tsx
â”‚
â”œâ”€â”€ ChatPage/                     # ğŸ’¬ èŠå¤©é¡µé¢
â”‚   â””â”€â”€ index.tsx                 # ç§ä¿¡èŠå¤©
â”‚
â”œâ”€â”€ LikesPage/                    # â¤ï¸ ç‚¹èµé€šçŸ¥é¡µ
â”‚   â””â”€â”€ index.tsx
â”‚
â”œâ”€â”€ CommentsPage/                 # ğŸ’­ è¯„è®ºé€šçŸ¥é¡µ
â”‚   â””â”€â”€ index.tsx
â”‚
â”œâ”€â”€ FollowersPage/                # ğŸ‘¥ æ–°ç²‰ä¸é¡µ
â”‚   â”œâ”€â”€ index.tsx
â”‚   â””â”€â”€ FollowerItem.tsx          # ç²‰ä¸åˆ—è¡¨é¡¹
â”‚
â”œâ”€â”€ NotificationsPage/            # ğŸ”” ç³»ç»Ÿé€šçŸ¥é¡µ
â”‚   â””â”€â”€ index.tsx
â”‚
â”œâ”€â”€ SharedComponents/             # ğŸ§© å…±äº«ç»„ä»¶
â”‚   â”œâ”€â”€ index.ts                  # ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ ChatBubble/               # èŠå¤©æ°”æ³¡
â”‚   â”œâ”€â”€ MessageItem/              # æ¶ˆæ¯åˆ—è¡¨é¡¹
â”‚   â”œâ”€â”€ SwipeActions/             # æ»‘åŠ¨æ“ä½œ
â”‚   â””â”€â”€ UserAvatar/               # ç”¨æˆ·å¤´åƒ
â”‚
â”œâ”€â”€ stores/                       # ğŸ“¦ çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ index.ts                  # ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ messagesStore.ts          # æ¶ˆæ¯åˆ—è¡¨çŠ¶æ€
â”‚   â”œâ”€â”€ chatStore.ts              # èŠå¤©çŠ¶æ€
â”‚   â””â”€â”€ webSocketStore.ts         # WebSocketçŠ¶æ€
â”‚
â””â”€â”€ api/                          # ğŸŒ APIæœåŠ¡
    â”œâ”€â”€ index.ts                  # ç»Ÿä¸€å¯¼å‡º
    â”œâ”€â”€ messagesApi.ts            # æ¶ˆæ¯API
    â”œâ”€â”€ chatApi.ts                # èŠå¤©API
    â”œâ”€â”€ notificationsApi.ts       # é€šçŸ¥API
    â””â”€â”€ mockData.ts               # Mockæ•°æ®
```

## ğŸ—ºï¸ é¡µé¢å¯¼èˆªæµç¨‹

### é¡µé¢æ¸…å•

| é¡µé¢ | è·¯ç”± | ç»„ä»¶ | çŠ¶æ€ |
|------|------|------|------|
| **æ¶ˆæ¯ä¸»é¡µ** | `/(tabs)/messages` | `MainPage` | âœ… å·²å®ç° |
| **ç§ä¿¡èŠå¤©** | `/(tabs)/messages/chat/[conversationId]` | `ChatPage` | âœ… å·²å®ç° |
| **ç‚¹èµé€šçŸ¥** | `/(tabs)/messages/likes` | `LikesPage` | âœ… å·²å®ç° |
| **è¯„è®ºé€šçŸ¥** | `/(tabs)/messages/comments` | `CommentsPage` | âœ… å·²å®ç° |
| **æ–°ç²‰ä¸** | `/(tabs)/messages/followers` | `FollowersPage` | âœ… å·²å®ç° |
| **ç³»ç»Ÿé€šçŸ¥** | `/(tabs)/messages/notifications` | `NotificationsPage` | âœ… å·²å®ç° |

### é¡µé¢è·³è½¬å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Messages æ¨¡å—å¯¼èˆªæµç¨‹                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ /(tabs)/messages  â”‚
                        â”‚    MainPage       â”‚
                        â”‚   æ¶ˆæ¯ä¸»é¡µé¢       â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                         â”‚                         â”‚
        â†“                         â†“                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å››å®«æ ¼åˆ†ç±»    â”‚        â”‚   å¯¹è¯åˆ—è¡¨     â”‚        â”‚  ç™»å½•æç¤º     â”‚
â”‚ CategoryArea  â”‚        â”‚Conversation   â”‚        â”‚(æœªç™»å½•çŠ¶æ€)   â”‚
â”‚               â”‚        â”‚    Area       â”‚        â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                        â”‚                        â”‚
   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”        â”‚                        â†“
   â”‚         â”‚    â”‚    â”‚        â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â†“         â†“    â†“    â†“        â†“               â”‚ /auth/login   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚   ç™»å½•é¡µé¢    â”‚
â”‚likes â”‚ â”‚comts â”‚â”‚follwsâ”‚â”‚notifsâ”‚â”‚chat/[convId] â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ç‚¹èµ   â”‚ â”‚è¯„è®º   â”‚â”‚ç²‰ä¸  â”‚â”‚ç³»ç»Ÿ   â”‚â”‚  ç§ä¿¡èŠå¤©     â”‚
â””â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”€â”˜â””â”€â”€â”¬â”€â”€â”€â”˜â””â”€â”€â”¬â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚        â”‚       â”‚       â”‚           â”‚
   â”‚        â”‚       â”‚       â”‚           â”‚
   â†“        â†“       â†“       â†“           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ç‚¹å‡»ç”¨æˆ·å¤´åƒ/åˆ—è¡¨é¡¹                         â”‚
â”‚                              â†“                                  â”‚
â”‚                    /profile/[userId]                            â”‚
â”‚                      ç”¨æˆ·è¯¦æƒ…é¡µ                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¯¦ç»†å¯¼èˆªè¯´æ˜

#### 1. æ¶ˆæ¯ä¸»é¡µ (MainPage) å‡ºå‘çš„å¯¼èˆª

| è§¦å‘åŒºåŸŸ | è§¦å‘æ“ä½œ | ç›®æ ‡é¡µé¢ | å¯¼èˆªä»£ç  |
|---------|---------|---------|---------|
| CategoryArea | ç‚¹å‡»"ç‚¹èµ" | ç‚¹èµé€šçŸ¥é¡µ | `router.push('/(tabs)/messages/likes')` |
| CategoryArea | ç‚¹å‡»"è¯„è®º" | è¯„è®ºé€šçŸ¥é¡µ | `router.push('/(tabs)/messages/comments')` |
| CategoryArea | ç‚¹å‡»"ç²‰ä¸" | æ–°ç²‰ä¸é¡µ | `router.push('/(tabs)/messages/followers')` |
| CategoryArea | ç‚¹å‡»"é€šçŸ¥" | ç³»ç»Ÿé€šçŸ¥é¡µ | `router.push('/(tabs)/messages/notifications')` |
| ConversationArea | ç‚¹å‡»å¯¹è¯ | ç§ä¿¡èŠå¤©é¡µ | `router.push('/(tabs)/messages/chat/${conversationId}')` |
| ç™»å½•æç¤º | ç‚¹å‡»ç™»å½• | ç™»å½•é¡µ | `router.push({ pathname: '/auth/login', params: { returnTo } })` |

#### 2. ç§ä¿¡èŠå¤©é¡µ (ChatPage) å‡ºå‘çš„å¯¼èˆª

| è§¦å‘æ“ä½œ | ç›®æ ‡é¡µé¢ | å¯¼èˆªä»£ç  |
|---------|---------|---------|
| ç‚¹å‡»å¯¹æ–¹å¤´åƒ | ç”¨æˆ·è¯¦æƒ…é¡µ | `router.push({ pathname: '/profile/[userId]', params: { userId } })` |
| ç‚¹å‡»è¿”å› | æ¶ˆæ¯ä¸»é¡µ | `router.back()` |

#### 3. ç‚¹èµé€šçŸ¥é¡µ (LikesPage) å‡ºå‘çš„å¯¼èˆª

| è§¦å‘æ“ä½œ | ç›®æ ‡é¡µé¢ | å¯¼èˆªä»£ç  |
|---------|---------|---------|
| ç‚¹å‡»ç”¨æˆ·å¤´åƒ | ç”¨æˆ·è¯¦æƒ…é¡µ | `router.push({ pathname: '/profile/[userId]', params: { userId } })` |
| ç‚¹å‡»å†…å®¹ | åŠ¨æ€è¯¦æƒ…é¡µ | `router.push({ pathname: '/feed/[id]', params: { id: feedId } })` |

#### 4. è¯„è®ºé€šçŸ¥é¡µ (CommentsPage) å‡ºå‘çš„å¯¼èˆª

| è§¦å‘æ“ä½œ | ç›®æ ‡é¡µé¢ | å¯¼èˆªä»£ç  |
|---------|---------|---------|
| ç‚¹å‡»ç”¨æˆ·å¤´åƒ | ç”¨æˆ·è¯¦æƒ…é¡µ | `router.push({ pathname: '/profile/[userId]', params: { userId } })` |
| ç‚¹å‡»å†…å®¹ | åŠ¨æ€è¯¦æƒ…é¡µ | `router.push({ pathname: '/feed/[id]', params: { id: feedId } })` |

#### 5. æ–°ç²‰ä¸é¡µ (FollowersPage) å‡ºå‘çš„å¯¼èˆª

| è§¦å‘æ“ä½œ | ç›®æ ‡é¡µé¢ | å¯¼èˆªä»£ç  |
|---------|---------|---------|
| ç‚¹å‡»ç²‰ä¸é¡¹ | ç”¨æˆ·è¯¦æƒ…é¡µ | æš‚æœªå®ç°ï¼ˆæ³¨é‡ŠçŠ¶æ€ï¼‰ |

#### 6. ç³»ç»Ÿé€šçŸ¥é¡µ (NotificationsPage) å‡ºå‘çš„å¯¼èˆª

| è§¦å‘æ“ä½œ | ç›®æ ‡é¡µé¢ | å¯¼èˆªä»£ç  |
|---------|---------|---------|
| ç‚¹å‡»é€šçŸ¥é¡¹ | ç›¸å…³é¡µé¢ | æ ¹æ®é€šçŸ¥ç±»å‹è·³è½¬ |

### è·¨æ¨¡å—å¯¼èˆªï¼ˆä» Messages å‡ºå‘ï¼‰

| ç›®æ ‡æ¨¡å— | ç›®æ ‡é¡µé¢ | è§¦å‘åœºæ™¯ | è·¯ç”± |
|---------|---------|---------|------|
| **Profile** | ç”¨æˆ·è¯¦æƒ… | ç‚¹å‡»ç”¨æˆ·å¤´åƒ | `/profile/[userId]` |
| **Discovery** | åŠ¨æ€è¯¦æƒ… | ç‚¹å‡»è¢«ç‚¹èµ/è¯„è®ºçš„å†…å®¹ | `/feed/[id]` |
| **Auth** | ç™»å½•é¡µ | æœªç™»å½•ç‚¹å‡»ç™»å½•æŒ‰é’® | `/auth/login` |

### å¤–éƒ¨è¿›å…¥ Messages æ¨¡å—

| æ¥æºæ¨¡å— | å…¥å£ | è·¯ç”± |
|---------|------|------|
| åº•éƒ¨Tabæ  | ç‚¹å‡»"æ¶ˆæ¯"Tab | `/(tabs)/messages` |
| Profile/OtherUserProfilePage | ç‚¹å‡»ç§ä¿¡æŒ‰é’® | `/(tabs)/messages/chat/[conversationId]` |
| Homepage/UserDetailFlow | ç‚¹å‡»ç§ä¿¡æŒ‰é’® | `/(tabs)/messages/chat/[conversationId]` |

## ğŸ”‘ æ ¸å¿ƒæ¥å£

### é¡µé¢ç»„ä»¶
| ç»„ä»¶ | è¯´æ˜ | è·¯ç”± |
|------|------|------|
| `MainPage` | æ¶ˆæ¯ä¸»é¡µ | `/(tabs)/messages` |
| `ChatPage` | ç§ä¿¡èŠå¤© | `/(tabs)/messages/chat/[conversationId]` |
| `LikesPage` | ç‚¹èµé€šçŸ¥ | `/(tabs)/messages/likes` |
| `CommentsPage` | è¯„è®ºé€šçŸ¥ | `/(tabs)/messages/comments` |
| `FollowersPage` | æ–°ç²‰ä¸ | `/(tabs)/messages/followers` |
| `NotificationsPage` | ç³»ç»Ÿé€šçŸ¥ | `/(tabs)/messages/notifications` |

### çŠ¶æ€ç®¡ç† Stores
| Store | è¯´æ˜ |
|-------|------|
| `messagesStore` | æ¶ˆæ¯åˆ—è¡¨ã€æœªè¯»æ•°ã€å¯¹è¯åˆ—è¡¨ |
| `chatStore` | å½“å‰èŠå¤©ã€æ¶ˆæ¯å†å² |
| `webSocketStore` | WebSocket è¿æ¥çŠ¶æ€ |

### å…±äº«ç»„ä»¶
| ç»„ä»¶ | è¯´æ˜ |
|------|------|
| `ChatBubble` | èŠå¤©æ¶ˆæ¯æ°”æ³¡ |
| `MessageItem` | æ¶ˆæ¯åˆ—è¡¨é¡¹ï¼ˆå¤´åƒ+å†…å®¹+æ—¶é—´ï¼‰ |
| `SwipeActions` | å·¦æ»‘åˆ é™¤/æ ‡è®°å·²è¯» |
| `UserAvatar` | ç”¨æˆ·å¤´åƒï¼ˆåœ¨çº¿çŠ¶æ€ï¼‰ |

### æ ¸å¿ƒç±»å‹
```typescript
// å¯¹è¯
interface Conversation {
  id: string;
  user: User;
  lastMessage: string;
  timestamp: number;
  unreadCount: number;
}

// æ¶ˆæ¯
interface Message {
  id: string;
  senderId: string;
  content: string;
  status: 'sending' | 'sent' | 'delivered' | 'read';
}

// é€šçŸ¥
interface Notification {
  type: 'like' | 'comment' | 'follow' | 'system';
  user?: User;
  content: string;
  isRead: boolean;
}

// æ¶ˆæ¯åˆ†ç±»
enum MessageCategory {
  LIKES = 'likes',
  COMMENTS = 'comments',
  FOLLOWERS = 'followers',
  NOTIFICATIONS = 'notifications',
}
```

## ğŸ›ï¸ æ¶æ„è®¾è®¡

### æ¨¡å—æ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Messages æ¨¡å—                      â”‚
â”‚                  (index.ts ç»Ÿä¸€å¯¼å‡º)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                  â”‚                  â”‚
    â†“                  â†“                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚MainPage â”‚    â”‚ é€šçŸ¥é¡µé¢     â”‚    â”‚SharedComponentsâ”‚
â”‚(æ¶ˆæ¯ä¸»é¡µ)â”‚    â”‚(Likes/...)  â”‚    â”‚ (å…±äº«ç»„ä»¶)     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      MainPage åŒºåŸŸç»„ä»¶           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ NavigationArea  (é¡¶éƒ¨å¯¼èˆª)       â”‚
â”‚ CategoryArea    (å››å®«æ ¼åˆ†ç±»)     â”‚
â”‚ ConversationArea (å¯¹è¯åˆ—è¡¨)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµå‘
```
ç”¨æˆ·æ“ä½œ
    â†“
é¡µé¢ç»„ä»¶ (MainPage/ChatPage/...)
    â†“
Zustand Store (messagesStore/chatStore)
    â†“
API æœåŠ¡ (messagesApi/chatApi)
    â†“
åç«¯æœåŠ¡ / WebSocket
    â†“
çŠ¶æ€æ›´æ–° â†’ UI æ¸²æŸ“
```

### WebSocket å®æ—¶æ¶ˆæ¯
```
App å¯åŠ¨
    â†“
webSocketStore.connect()
    â†“
WebSocket æœåŠ¡å™¨
    â†“
æ”¶åˆ°æ¶ˆæ¯ â†’ chatStore.addMessage()
    â†“
UI å®æ—¶æ›´æ–°
```

## ğŸ”¥ æŠ€æœ¯äº®ç‚¹

1. **æ‰å¹³åŒ–åŒºåŸŸç»„ä»¶**ï¼šCategoryArea/ConversationArea ç›´æ¥åœ¨ MainPage/ ä¸‹
2. **æ¨¡å—å†… Store**ï¼šmessagesStore/chatStore åœ¨ `stores/` ç›®å½•é›†ä¸­ç®¡ç†
3. **æ¨¡å—å†… API**ï¼šmessagesApi/chatApi åœ¨ `api/` ç›®å½•ç‹¬ç«‹ç®¡ç†
4. **SharedComponents**ï¼šChatBubble/MessageItem ç­‰ç»„ä»¶æ¨¡å—å†…å…±äº«
5. **WebSocket é›†æˆ**ï¼šwebSocketStore ç®¡ç†å®æ—¶æ¶ˆæ¯è¿æ¥
6. **å››å®«æ ¼åˆ†ç±»**ï¼šç‚¹èµ/è¯„è®º/ç²‰ä¸/é€šçŸ¥ å››ä¸ªå…¥å£

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### å¯¼å…¥æ–¹å¼
```typescript
// å¯¼å…¥é¡µé¢
import {
  MainPage,
  ChatPage,
  LikesPage,
  CommentsPage,
  FollowersPage,
  NotificationsPage
} from '@/src/features/Messages';

// å¯¼å…¥å…±äº«ç»„ä»¶
import {
  ChatBubble,
  MessageItem,
  SwipeActions,
  UserAvatar
} from '@/src/features/Messages';

// å¯¼å…¥ Store
import {
  useMessagesStore,
  useChatStore,
  useWebSocketStore
} from '@/src/features/Messages';

// å¯¼å…¥ç±»å‹
import type {
  Conversation,
  Message,
  Notification,
  MessageCategory
} from '@/src/features/Messages';
```

### ä½¿ç”¨ Store
```typescript
import { useMessagesStore } from '@/src/features/Messages';

function MyComponent() {
  const {
    conversations,
    totalUnread,
    loadConversations,
    markAsRead
  } = useMessagesStore();

  useEffect(() => {
    loadConversations();
  }, []);

  return <Text>æœªè¯»: {totalUnread}</Text>;
}
```

## ğŸ“Œ æ³¨æ„äº‹é¡¹

### æ¶æ„è§„èŒƒ
- **æ‰å¹³åŒ–**ï¼šåŒºåŸŸç»„ä»¶ç›´æ¥åœ¨ MainPage/ ä¸‹ï¼Œæ—  components/ ä¸­é—´å±‚
- **æ¨¡å—å†… Store**ï¼šæ¶ˆæ¯ç›¸å…³çŠ¶æ€åœ¨ `stores/` ç›®å½•ç®¡ç†
- **æ¨¡å—å†… API**ï¼šæ¶ˆæ¯ç›¸å…³ API åœ¨ `api/` ç›®å½•ç®¡ç†
- **SharedComponents**ï¼šæ¨¡å—å†…å…±äº«ç»„ä»¶ç»Ÿä¸€ç®¡ç†

### çŠ¶æ€ç®¡ç†
- **messagesStore**ï¼šå¯¹è¯åˆ—è¡¨ã€åˆ†ç±»æœªè¯»æ•°
- **chatStore**ï¼šå½“å‰èŠå¤©ä¼šè¯ã€æ¶ˆæ¯å†å²
- **webSocketStore**ï¼šWebSocket è¿æ¥ã€å¿ƒè·³

### å®æ—¶æ¶ˆæ¯
- WebSocket åœ¨ App å¯åŠ¨æ—¶è¿æ¥
- æ”¶åˆ°æ–°æ¶ˆæ¯è‡ªåŠ¨æ›´æ–° Store
- æ–­çº¿è‡ªåŠ¨é‡è¿

### åˆ†ç±»å…¥å£
- **ç‚¹èµ**ï¼š`/messages/likes`
- **è¯„è®º**ï¼š`/messages/comments`
- **ç²‰ä¸**ï¼š`/messages/followers`
- **é€šçŸ¥**ï¼š`/messages/notifications`

### Mock æ•°æ®
- `api/mockData.ts` åŒ…å«æµ‹è¯•æ•°æ®
- å¼€å‘æ—¶å¯åˆ‡æ¢çœŸå® API
